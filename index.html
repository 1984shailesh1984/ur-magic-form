<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Track Exact Device Location</title>

  <script type="module">
    // Import necessary Firebase modules
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-database.js";
    import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";

    // Your Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyB9vyA5CbhlVUPBHqvzr0yq88xufax5bWo",
      authDomain: "audio-call-in-thi.firebaseapp.com",
      databaseURL: "https://audio-call-in-thi-default-rtdb.firebaseio.com",
      projectId: "audio-call-in-thi",
      storageBucket: "audio-call-in-thi.firebasestorage.app",
      messagingSenderId: "154034686991",
      appId: "1:154034686991:web:80aab62e22d92d7814a77a"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const auth = getAuth(app);

    // Sign in anonymously
    signInAnonymously(auth)
      .then(() => {
        console.log("Anonymous user signed in.");
        // Now that the user is signed in, you can send data to Firebase

        // Example function to send data to Firebase
        function sendDataToFirebase(userData) {
          console.log("Sending data to Firebase:", userData);
          const userDataRef = ref(database, 'userData/' + auth.currentUser.uid);
          set(userDataRef, userData)
            .then(() => {
              console.log('Data sent successfully to Firebase');
            })
            .catch((error) => {
              console.error('Error sending data: ', error);
            });
        }

        // Example data to send
        const userData = {
          userAgent: navigator.userAgent, // Browser/Device info
          platform: navigator.platform,  // Device platform
          timestamp: new Date().toISOString(),
          location: "Location info here",
        };

        // Send data to Firebase
        sendDataToFirebase(userData);
      })
      .catch((error) => {
        console.error("Error signing in anonymously: ", error);
      });

  </script>
</head>
<body>
  <h1>Welcome to the Tracking Page</h1>
  <p>This website is collecting information for educational purposes only.</p>
</body>
</html>
